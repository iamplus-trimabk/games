<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player vs Player Rock Paper Scissors</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Nunito:wght@400;600;700&family=Comic+Neue:wght@400;700&display=swap');
        
        :root {
            --brand-purple: #7B54FA;
            --brand-purple-light: #9B7BFF;
            --brand-purple-dark: #5B34DA;
        }
        
        .brand-purple { color: var(--brand-purple); }
        .bg-brand-purple { background-color: var(--brand-purple); }
        .border-brand-purple { border-color: var(--brand-purple); }
        
        .bounce-in {
            animation: bounceIn 0.8s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0) rotate(0deg); }
            50% { transform: scale(1.3) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }
        
        .shake {
            animation: shake 0.6s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-5deg); }
            75% { transform: translateX(10px) rotate(5deg); }
        }
        
        .glow-pulse {
            animation: glowPulse 2s ease-in-out infinite;
        }
        
        @keyframes glowPulse {
            0%, 100% { box-shadow: 0 0 20px rgba(123, 84, 250, 0.3); }
            50% { box-shadow: 0 0 40px rgba(123, 84, 250, 0.6); }
        }
        
        .float-animation {
            animation: floatAnimation 3s ease-in-out infinite;
        }
        
        @keyframes floatAnimation {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
        
        .choice-button {
            transition: all 0.3s ease;
        }
        
        .choice-button:hover {
            transform: scale(1.1) rotate(5deg);
        }
        
        .choice-button:active {
            transform: scale(0.95);
        }
        
        .theme-transition {
            transition: all 0.5s ease-in-out;
        }
        
        .countdown-animation {
            animation: countdownPulse 1s ease-in-out;
        }
        
        @keyframes countdownPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.5); }
            100% { transform: scale(1); }
        }
        
        .confetti {
            animation: confetti 3s ease-out forwards;
        }
        
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; }
        }
        
        /* Theme-specific styles */
        .theme-animals {
            background: linear-gradient(135deg, #FFE5B4 0%, #FFCCCB 50%, #E6E6FA 100%);
        }
        
        .theme-space {
            background: linear-gradient(135deg, #000428 0%, #004e92 50%, #7B54FA 100%);
        }
        
        .theme-gaming {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #7B54FA 100%);
        }
        
        .player-area {
            min-height: 400px;
        }
        
        .vs-divider {
            background: linear-gradient(to bottom, transparent, var(--brand-purple), transparent);
            width: 4px;
        }
    </style>
</head>
<body class="min-h-screen theme-transition" id="gameBody">
    
    <!-- Theme Selector -->
    <div class="fixed top-4 right-4 z-50">
        <div class="bg-white rounded-2xl p-3 shadow-lg">
            <div class="text-xs font-semibold text-gray-600 mb-2 text-center">Choose Theme:</div>
            <div class="flex space-x-2">
                <button onclick="changeTheme('animals')" class="w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-200 to-pink-200 flex items-center justify-center text-xl hover:scale-110 transition-transform" title="5-7 Years: Animals">
                    ğŸ±
                </button>
                <button onclick="changeTheme('space')" class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-900 to-purple-600 flex items-center justify-center text-xl hover:scale-110 transition-transform" title="7-9 Years: Space">
                    ğŸš€
                </button>
                <button onclick="changeTheme('gaming')" class="w-12 h-12 rounded-xl bg-gradient-to-br from-gray-800 to-purple-600 flex items-center justify-center text-xl hover:scale-110 transition-transform" title="10-14 Years: Gaming">
                    ğŸ®
                </button>
            </div>
        </div>
    </div>
    
    <!-- Header -->
    <div class="text-center py-6">
        <h1 id="gameTitle" class="text-4xl md:text-6xl font-bold text-white mb-2" style="font-family: 'Fredoka One', cursive;">
            ğŸ¾ Animal Rock Paper Scissors ğŸ¾
        </h1>
        <p id="gameSubtitle" class="text-white text-lg font-semibold">Player vs Player Battle!</p>
        <div id="ageGroup" class="text-white text-sm opacity-80 mt-1">Perfect for ages 5-7</div>
    </div>
    
    <!-- Game Container -->
    <div class="max-w-7xl mx-auto px-4">
        
        <!-- Score Board -->
        <div class="bg-white bg-opacity-95 rounded-3xl p-6 mb-6 shadow-2xl">
            <h3 class="text-2xl font-bold text-center brand-purple mb-4" style="font-family: 'Fredoka One', cursive;">
                ğŸ† Score Board ğŸ†
            </h3>
            <div class="grid grid-cols-3 gap-4 text-center">
                <div class="bg-blue-50 rounded-2xl p-4 border-4 border-blue-200">
                    <div class="text-2xl mb-2">ğŸ‘¤</div>
                    <div class="font-bold text-blue-600">Player 1</div>
                    <div class="text-4xl font-bold text-blue-800" id="player1Score">0</div>
                </div>
                <div class="bg-purple-50 rounded-2xl p-4 border-4 border-purple-200">
                    <div class="text-2xl mb-2">ğŸ¯</div>
                    <div class="font-bold brand-purple">Round</div>
                    <div class="text-4xl font-bold brand-purple" id="currentRound">1</div>
                    <div class="text-sm text-gray-600">Best of 5</div>
                </div>
                <div class="bg-red-50 rounded-2xl p-4 border-4 border-red-200">
                    <div class="text-2xl mb-2">ğŸ‘¤</div>
                    <div class="font-bold text-red-600">Player 2</div>
                    <div class="text-4xl font-bold text-red-800" id="player2Score">0</div>
                </div>
            </div>
        </div>
        
        <!-- Game Area -->
        <div class="bg-white bg-opacity-95 rounded-3xl p-8 shadow-2xl mb-6">
            
            <!-- Countdown/Result Display -->
            <div class="text-center mb-8">
                <div id="countdownDisplay" class="text-6xl font-bold brand-purple mb-4 hidden" style="font-family: 'Fredoka One', cursive;">
                    3
                </div>
                <div id="resultMessage" class="text-3xl font-bold brand-purple mb-4" style="font-family: 'Fredoka One', cursive;">
                    Choose your moves and get ready to battle!
                </div>
                <div id="resultEmoji" class="text-8xl"></div>
            </div>
            
            <!-- Battle Arena -->
            <div class="grid grid-cols-3 gap-8 items-center">
                
                <!-- Player 1 Area -->
                <div class="player-area bg-gradient-to-br from-blue-50 to-blue-100 rounded-3xl p-6 border-4 border-blue-300">
                    <h3 class="text-2xl font-bold text-blue-800 text-center mb-6">Player 1</h3>
                    
                    <!-- Player 1 Choice Display -->
                    <div class="text-center mb-6">
                        <div class="w-32 h-32 mx-auto bg-gradient-to-br from-blue-200 to-blue-300 rounded-3xl border-4 border-blue-400 flex items-center justify-center text-6xl glow-pulse" id="player1Choice">
                            â“
                        </div>
                        <div class="mt-3 text-lg font-bold text-blue-700" id="player1Status">Choose your move!</div>
                    </div>
                    
                    <!-- Player 1 Buttons -->
                    <div id="player1Buttons" class="space-y-3">
                        <button class="choice-button w-full bg-gradient-to-br from-orange-200 to-orange-300 hover:from-orange-300 hover:to-orange-400 rounded-2xl p-4 border-4 border-orange-400 shadow-lg hover:shadow-xl" onclick="selectChoice(1, 'rock')">
                            <div class="flex items-center justify-center space-x-3">
                                <div class="text-3xl">ğŸª¨</div>
                                <div class="text-xl font-bold text-orange-800">Rock</div>
                            </div>
                        </button>
                        
                        <button class="choice-button w-full bg-gradient-to-br from-blue-200 to-blue-300 hover:from-blue-300 hover:to-blue-400 rounded-2xl p-4 border-4 border-blue-400 shadow-lg hover:shadow-xl" onclick="selectChoice(1, 'paper')">
                            <div class="flex items-center justify-center space-x-3">
                                <div class="text-3xl">ğŸ“„</div>
                                <div class="text-xl font-bold text-blue-800">Paper</div>
                            </div>
                        </button>
                        
                        <button class="choice-button w-full bg-gradient-to-br from-green-200 to-green-300 hover:from-green-300 hover:to-green-400 rounded-2xl p-4 border-4 border-green-400 shadow-lg hover:shadow-xl" onclick="selectChoice(1, 'scissors')">
                            <div class="flex items-center justify-center space-x-3">
                                <div class="text-3xl">âœ‚ï¸</div>
                                <div class="text-xl font-bold text-green-800">Scissors</div>
                            </div>
                        </button>
                    </div>
                </div>
                
                <!-- VS Section -->
                <div class="text-center">
                    <div class="vs-divider mx-auto mb-4" style="height: 200px;"></div>
                    <div class="text-5xl font-bold brand-purple animate-pulse mb-4" style="font-family: 'Fredoka One', cursive;">VS</div>
                    <div id="battleAnimation" class="text-4xl">âš”ï¸</div>
                    <div class="vs-divider mx-auto mt-4" style="height: 200px;"></div>
                </div>
                
                <!-- Player 2 Area -->
                <div class="player-area bg-gradient-to-br from-red-50 to-red-100 rounded-3xl p-6 border-4 border-red-300">
                    <h3 class="text-2xl font-bold text-red-800 text-center mb-6">Player 2</h3>
                    
                    <!-- Player 2 Choice Display -->
                    <div class="text-center mb-6">
                        <div class="w-32 h-32 mx-auto bg-gradient-to-br from-red-200 to-red-300 rounded-3xl border-4 border-red-400 flex items-center justify-center text-6xl glow-pulse" id="player2Choice">
                            â“
                        </div>
                        <div class="mt-3 text-lg font-bold text-red-700" id="player2Status">Choose your move!</div>
                    </div>
                    
                    <!-- Player 2 Buttons -->
                    <div id="player2Buttons" class="space-y-3">
                        <button class="choice-button w-full bg-gradient-to-br from-orange-200 to-orange-300 hover:from-orange-300 hover:to-orange-400 rounded-2xl p-4 border-4 border-orange-400 shadow-lg hover:shadow-xl" onclick="selectChoice(2, 'rock')">
                            <div class="flex items-center justify-center space-x-3">
                                <div class="text-3xl">ğŸª¨</div>
                                <div class="text-xl font-bold text-orange-800">Rock</div>
                            </div>
                        </button>
                        
                        <button class="choice-button w-full bg-gradient-to-br from-blue-200 to-blue-300 hover:from-blue-300 hover:to-blue-400 rounded-2xl p-4 border-4 border-blue-400 shadow-lg hover:shadow-xl" onclick="selectChoice(2, 'paper')">
                            <div class="flex items-center justify-center space-x-3">
                                <div class="text-3xl">ğŸ“„</div>
                                <div class="text-xl font-bold text-blue-800">Paper</div>
                            </div>
                        </button>
                        
                        <button class="choice-button w-full bg-gradient-to-br from-green-200 to-green-300 hover:from-green-300 hover:to-green-400 rounded-2xl p-4 border-4 border-green-400 shadow-lg hover:shadow-xl" onclick="selectChoice(2, 'scissors')">
                            <div class="flex items-center justify-center space-x-3">
                                <div class="text-3xl">âœ‚ï¸</div>
                                <div class="text-xl font-bold text-green-800">Scissors</div>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Battle Button -->
            <div class="text-center mt-8">
                <button id="battleButton" onclick="startBattle()" class="bg-brand-purple hover:bg-purple-700 text-white font-bold py-4 px-12 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 text-2xl hidden" style="font-family: 'Fredoka One', cursive;">
                    âš”ï¸ BATTLE!
                </button>
            </div>
        </div>
        
        <!-- Control Buttons -->
        <div class="text-center space-y-4">
            <button onclick="resetGame()" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 text-lg">
                ğŸ”„ New Game
            </button>
        </div>
    </div>
    
    <!-- Winner Modal -->
    <div id="winnerModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-3xl p-8 max-w-md mx-4 text-center shadow-2xl">
            <div id="winnerEmoji" class="text-8xl mb-4">ğŸ†</div>
            <h2 id="winnerTitle" class="text-3xl font-bold brand-purple mb-4" style="font-family: 'Fredoka One', cursive;">
                Player 1 Wins!
            </h2>
            <p id="winnerMessage" class="text-lg text-gray-700 mb-6">
                Congratulations on your victory!
            </p>
            <button onclick="closeWinnerModal()" class="bg-brand-purple hover:bg-purple-700 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                ğŸ‰ Play Again
            </button>
        </div>
    </div>
    
    <!-- Floating Decorations -->
    <div id="floatingDecorations">
        <div class="fixed top-20 left-10 text-4xl float-animation opacity-60">ğŸŒŸ</div>
        <div class="fixed top-40 right-20 text-3xl float-animation opacity-60" style="animation-delay: 1s;">ğŸˆ</div>
        <div class="fixed bottom-20 left-20 text-4xl float-animation opacity-60" style="animation-delay: 2s;">ğŸŠ</div>
        <div class="fixed bottom-40 right-10 text-3xl float-animation opacity-60" style="animation-delay: 3s;">âœ¨</div>
    </div>
    
    <!-- Confetti Container -->
    <div id="confettiContainer" class="fixed inset-0 pointer-events-none z-40"></div>
    
    <script>
        let currentTheme = 'animals';
        let gameState = {
            player1Choice: null,
            player2Choice: null,
            player1Score: 0,
            player2Score: 0,
            currentRound: 1,
            maxRounds: 5
        };
        
        const themes = {
            animals: {
                title: 'ğŸ¾ Animal Rock Paper Scissors ğŸ¾',
                subtitle: 'Player vs Player Battle!',
                ageGroup: 'Perfect for ages 5-7',
                bodyClass: 'theme-animals',
                decorations: ['ğŸŒŸ', 'ğŸˆ', 'ğŸŠ', 'âœ¨'],
                icons: {
                    rock: 'ğŸª¨',
                    paper: 'ğŸ“„',
                    scissors: 'âœ‚ï¸'
                }
            },
            space: {
                title: 'ğŸš€ Space Rock Paper Scissors ğŸš€',
                subtitle: 'Player vs Player Battle!',
                ageGroup: 'Perfect for ages 7-9',
                bodyClass: 'theme-space',
                decorations: ['â­', 'ğŸŒŸ', 'âœ¨', 'ğŸŒ™'],
                icons: {
                    rock: 'ğŸª¨',
                    paper: 'ğŸ“„',
                    scissors: 'âœ‚ï¸'
                }
            },
            gaming: {
                title: 'ğŸ® Gaming Rock Paper Scissors ğŸ®',
                subtitle: 'Player vs Player Battle!',
                ageGroup: 'Perfect for ages 10-14',
                bodyClass: 'theme-gaming',
                decorations: ['âš¡', 'ğŸ’', 'ğŸ”¥', 'ğŸ’«'],
                icons: {
                    rock: 'ğŸª¨',
                    paper: 'ğŸ“„',
                    scissors: 'âœ‚ï¸'
                }
            }
        };
        
        function changeTheme(themeName) {
            currentTheme = themeName;
            const theme = themes[themeName];
            
            // Update header
            document.getElementById('gameTitle').textContent = theme.title;
            document.getElementById('gameSubtitle').textContent = theme.subtitle;
            document.getElementById('ageGroup').textContent = theme.ageGroup;
            
            // Update body class
            document.getElementById('gameBody').className = `min-h-screen theme-transition ${theme.bodyClass}`;
            
            // Update decorations
            updateDecorations();
            
            // Update button icons
            updateButtonIcons();
        }
        
        function updateDecorations() {
            const theme = themes[currentTheme];
            const decorationsContainer = document.getElementById('floatingDecorations');
            
            decorationsContainer.innerHTML = `
                <div class="fixed top-20 left-10 text-4xl float-animation opacity-60">${theme.decorations[0]}</div>
                <div class="fixed top-40 right-20 text-3xl float-animation opacity-60" style="animation-delay: 1s;">${theme.decorations[1]}</div>
                <div class="fixed bottom-20 left-20 text-4xl float-animation opacity-60" style="animation-delay: 2s;">${theme.decorations[2]}</div>
                <div class="fixed bottom-40 right-10 text-3xl float-animation opacity-60" style="animation-delay: 3s;">${theme.decorations[3]}</div>
            `;
        }
        
        function updateButtonIcons() {
            const theme = themes[currentTheme];
            
            // Update all rock buttons
            document.querySelectorAll('button[onclick*="rock"]').forEach(btn => {
                const iconElement = btn.querySelector('div:first-child');
                if (iconElement) iconElement.textContent = theme.icons.rock;
            });
            
            // Update all paper buttons
            document.querySelectorAll('button[onclick*="paper"]').forEach(btn => {
                const iconElement = btn.querySelector('div:first-child');
                if (iconElement) iconElement.textContent = theme.icons.paper;
            });
            
            // Update all scissors buttons
            document.querySelectorAll('button[onclick*="scissors"]').forEach(btn => {
                const iconElement = btn.querySelector('div:first-child');
                if (iconElement) iconElement.textContent = theme.icons.scissors;
            });
        }
        
        function selectChoice(player, choice) {
            if (player === 1) {
                gameState.player1Choice = choice;
                document.getElementById('player1Status').textContent = 'Choice locked in! âœ“';
                
                // Remove any previous highlights - keep selection completely secret
                document.querySelectorAll('#player1Buttons button').forEach(btn => {
                    btn.classList.remove('ring-4', 'ring-yellow-400');
                });
                
            } else {
                gameState.player2Choice = choice;
                document.getElementById('player2Status').textContent = 'Choice locked in! âœ“';
                
                // Remove any previous highlights - keep selection completely secret
                document.querySelectorAll('#player2Buttons button').forEach(btn => {
                    btn.classList.remove('ring-4', 'ring-yellow-400');
                });
            }
            
            // Show battle button if both players have chosen
            if (gameState.player1Choice && gameState.player2Choice) {
                document.getElementById('battleButton').classList.remove('hidden');
                document.getElementById('resultMessage').textContent = 'Both players ready! Click BATTLE to reveal!';
            }
        }
        
        function startBattle() {
            // Hide battle button
            document.getElementById('battleButton').classList.add('hidden');
            
            // Disable all buttons
            document.querySelectorAll('.choice-button').forEach(btn => {
                btn.disabled = true;
                btn.classList.add('opacity-50');
            });
            
            // Start countdown
            startCountdown();
        }
        
        function startCountdown() {
            const countdownDisplay = document.getElementById('countdownDisplay');
            const resultMessage = document.getElementById('resultMessage');
            
            countdownDisplay.classList.remove('hidden');
            resultMessage.textContent = 'Get ready for battle!';
            
            let count = 3;
            
            const countdownInterval = setInterval(() => {
                countdownDisplay.textContent = count;
                countdownDisplay.classList.add('countdown-animation');
                
                setTimeout(() => {
                    countdownDisplay.classList.remove('countdown-animation');
                }, 1000);
                
                count--;
                
                if (count < 0) {
                    clearInterval(countdownInterval);
                    countdownDisplay.textContent = 'SHOW!';
                    countdownDisplay.classList.add('countdown-animation');
                    
                    // Reveal choices when "SHOW!" appears
                    revealChoices();
                    
                    setTimeout(() => {
                        countdownDisplay.classList.add('hidden');
                        revealResults();
                    }, 1000);
                }
            }, 1200);
        }
        
        function revealChoices() {
            const theme = themes[currentTheme];
            
            // Reveal both players' choices with animation
            document.getElementById('player1Choice').textContent = theme.icons[gameState.player1Choice];
            document.getElementById('player1Choice').classList.add('bounce-in');
            
            document.getElementById('player2Choice').textContent = theme.icons[gameState.player2Choice];
            document.getElementById('player2Choice').classList.add('bounce-in');
            
            // Remove animation classes after animation
            setTimeout(() => {
                document.getElementById('player1Choice').classList.remove('bounce-in');
                document.getElementById('player2Choice').classList.remove('bounce-in');
            }, 800);
        }
        
        function revealResults() {
            const theme = themes[currentTheme];
            const p1Choice = gameState.player1Choice;
            const p2Choice = gameState.player2Choice;
            
            let result = '';
            let emoji = '';
            let winner = null;
            
            if (p1Choice === p2Choice) {
                result = "It's a tie! Both players chose the same!";
                emoji = 'ğŸ¤';
            } else if (
                (p1Choice === 'rock' && p2Choice === 'scissors') ||
                (p1Choice === 'paper' && p2Choice === 'rock') ||
                (p1Choice === 'scissors' && p2Choice === 'paper')
            ) {
                result = 'Player 1 wins this round!';
                emoji = 'ğŸ‰';
                winner = 1;
                gameState.player1Score++;
                document.getElementById('player1Score').textContent = gameState.player1Score;
                
                // Add celebration effect
                document.getElementById('player1Choice').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('player1Choice').classList.remove('shake');
                }, 600);
                
            } else {
                result = 'Player 2 wins this round!';
                emoji = 'ğŸ‰';
                winner = 2;
                gameState.player2Score++;
                document.getElementById('player2Score').textContent = gameState.player2Score;
                
                // Add celebration effect
                document.getElementById('player2Choice').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('player2Choice').classList.remove('shake');
                }, 600);
            }
            
            document.getElementById('resultMessage').textContent = result;
            document.getElementById('resultEmoji').textContent = emoji;
            
            // Create confetti if someone won
            if (winner) {
                createConfetti();
            }
            
            // Check if game is over
            setTimeout(() => {
                if (gameState.player1Score >= 3 || gameState.player2Score >= 3 || gameState.currentRound >= gameState.maxRounds) {
                    endGame();
                } else {
                    nextRound();
                }
            }, 3000);
        }
        
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti absolute w-3 h-3 rounded-full';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDelay = Math.random() * 3 + 's';
                container.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 3000);
            }
        }
        
        function nextRound() {
            gameState.currentRound++;
            document.getElementById('currentRound').textContent = gameState.currentRound;
            
            // Reset choices
            gameState.player1Choice = null;
            gameState.player2Choice = null;
            
            // Reset UI
            document.getElementById('player1Choice').textContent = 'â“';
            document.getElementById('player2Choice').textContent = 'â“';
            document.getElementById('player1Status').textContent = 'Choose your move!';
            document.getElementById('player2Status').textContent = 'Choose your move!';
            document.getElementById('resultMessage').textContent = 'Choose your moves for the next round!';
            document.getElementById('resultEmoji').textContent = '';
            
            // Re-enable buttons
            document.querySelectorAll('.choice-button').forEach(btn => {
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'ring-4', 'ring-yellow-400');
            });
        }
        
        function endGame() {
            let winnerText = '';
            let winnerEmoji = 'ğŸ†';
            let winnerMessage = '';
            
            if (gameState.player1Score > gameState.player2Score) {
                winnerText = 'Player 1 Wins!';
                winnerMessage = `Congratulations Player 1! You won ${gameState.player1Score} out of ${gameState.currentRound} rounds!`;
                winnerEmoji = 'ğŸ¥‡';
            } else if (gameState.player2Score > gameState.player1Score) {
                winnerText = 'Player 2 Wins!';
                winnerMessage = `Congratulations Player 2! You won ${gameState.player2Score} out of ${gameState.currentRound} rounds!`;
                winnerEmoji = 'ğŸ¥‡';
            } else {
                winnerText = "It's a Tie!";
                winnerMessage = `Amazing game! Both players scored ${gameState.player1Score} points!`;
                winnerEmoji = 'ğŸ¤';
            }
            
            document.getElementById('winnerTitle').textContent = winnerText;
            document.getElementById('winnerMessage').textContent = winnerMessage;
            document.getElementById('winnerEmoji').textContent = winnerEmoji;
            document.getElementById('winnerModal').classList.remove('hidden');
            
            // Create big confetti celebration
            for (let i = 0; i < 3; i++) {
                setTimeout(() => createConfetti(), i * 500);
            }
        }
        
        function closeWinnerModal() {
            document.getElementById('winnerModal').classList.add('hidden');
            resetGame();
        }
        
        function resetGame() {
            // Reset game state
            gameState = {
                player1Choice: null,
                player2Choice: null,
                player1Score: 0,
                player2Score: 0,
                currentRound: 1,
                maxRounds: 5
            };
            
            // Reset UI
            document.getElementById('player1Score').textContent = '0';
            document.getElementById('player2Score').textContent = '0';
            document.getElementById('currentRound').textContent = '1';
            document.getElementById('player1Choice').textContent = 'â“';
            document.getElementById('player2Choice').textContent = 'â“';
            document.getElementById('player1Status').textContent = 'Choose your move!';
            document.getElementById('player2Status').textContent = 'Choose your move!';
            document.getElementById('resultMessage').textContent = 'Choose your moves and get ready to battle!';
            document.getElementById('resultEmoji').textContent = '';
            document.getElementById('battleButton').classList.add('hidden');
            
            // Re-enable buttons
            document.querySelectorAll('.choice-button').forEach(btn => {
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'ring-4', 'ring-yellow-400');
            });
            
            // Clear confetti
            document.getElementById('confettiContainer').innerHTML = '';
        }
        
        // Initialize with animals theme
        changeTheme('animals');
    </script>
    
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96c13461f37c178d',t:'MTc1NDY3OTA4MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
